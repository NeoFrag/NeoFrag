/*!========================================================================
* File: bootstrap-iconpicker.min.js v1.9.0 by @victor-valencia + fix bootstrap 4
* https://victor-valencia.github.com/bootstrap-iconpicker
* ========================================================================
* Copyright 2013-2017 Victor Valencia Rico.
* Licensed under MIT license.
* https://github.com/victor-valencia/bootstrap-iconpicker/blob/master/LICENSE
* ========================================================================
*/

!function(d){"use strict";var c=function(t,e){this.$element=d(t),this.options=d.extend({},c.DEFAULTS,this.$element.data()),this.options=d.extend({},this.options,e)};c.VERSION="1.9.0",c.ICONSET_EMPTY={iconClass:"",iconClassFix:"",icons:[]},c.ICONSET={_custom:null,elusiveicon:d.iconset_elusiveicon||c.ICONSET_EMPTY,flagicon:d.iconset_flagicon||c.ICONSET_EMPTY,fontawesome:d.iconset_fontawesome||c.ICONSET_EMPTY,glyphicon:d.iconset_glyphicon||c.ICONSET_EMPTY,ionicon:d.iconset_ionicon||c.ICONSET_EMPTY,mapicon:d.iconset_mapicon||c.ICONSET_EMPTY,materialdesign:d.iconset_materialdesign||c.ICONSET_EMPTY,octicon:d.iconset_octicon||c.ICONSET_EMPTY,typicon:d.iconset_typicon||c.ICONSET_EMPTY,weathericon:d.iconset_weathericon||c.ICONSET_EMPTY},c.DEFAULTS={align:"center",arrowClass:"btn-primary",arrowNextIconClass:"glyphicon glyphicon-arrow-right",arrowPrevIconClass:"glyphicon glyphicon-arrow-left",cols:4,icon:"",iconset:"glyphicon",iconsetVersion:"lastest",header:!0,labelHeader:"{0} / {1}",footer:!0,labelFooter:"{0} - {1} of {2}",placement:"bottom",rows:4,search:!0,searchText:"Search icon",selectedClass:"btn-warning",unselectedClass:"btn-default"},c.prototype.bindEvents=function(){var o=this.options,s=this;o.table.find(".btn-previous, .btn-next").off("click").on("click",function(t){if(t.preventDefault(),!d(this).hasClass("disabled")){var e=parseInt(d(this).val(),10);s.changeList(o.page+e)}}),o.table.find(".btn-icon").off("click").on("click",function(t){t.preventDefault(),s.select(d(this).val()),!1===o.inline?s.$element.popover("dispose"):o.table.find("i."+d(this).val()).parent().addClass(o.selectedClass)}),o.table.find(".search-control").off("keyup").on("keyup",function(){s.changeList(1)})},c.prototype.changeList=function(t){this.filterIcons(),this.updateLabels(t),this.updateIcons(t),this.options.page=t,this.bindEvents()},c.prototype.filterIcons=function(){var o=this.options,s=o.table.find(".search-control").val(),n=[];if("lastest"!=o.iconsetVersion&&void 0!==c.ICONSET[o.iconset].allVersions?d.each(c.ICONSET[o.iconset].allVersions,function(t,e){o.iconsetVersion==e.version&&(n=e.icons)}):n=c.ICONSET[o.iconset].icons,""===s)o.icons=n;else{var i=[];d.each(n,function(t,e){-1<e.toLowerCase().indexOf(s)&&i.push(e)}),o.icons=i}},c.prototype.removeAddClass=function(t,e,o){return this.options.table.find(t).removeClass(e).addClass(o),o},c.prototype.reset=function(){this.updatePicker(),this.changeList(1)},c.prototype.select=function(t){var e=this.options,o=this.$element;e.selected=d.inArray(t.replace(e.iconClassFix,""),e.icons),-1===e.selected&&(e.selected=0,t=e.iconClassFix+e.icons[e.selected]),""!==t&&0<=e.selected&&(e.icon=t,!1===e.inline&&(o.find("input").val(t),o.find("i").attr("class","").addClass(e.iconClass).addClass(t)),t===e.iconClassFix?o.trigger({type:"change",icon:"empty"}):(o.trigger({type:"change",icon:t}),o.find("input").val(t)),e.table.find("button."+e.selectedClass).removeClass(e.selectedClass))},c.prototype.switchPage=function(t){var e=this.options;if(e.selected=d.inArray(t.replace(e.iconClassFix,""),e.icons),0<=e.selected){var o=Math.ceil((e.selected+1)/this.totalIconsPerPage());this.changeList(o)}""===t?e.table.find("i."+e.iconClassFix).parent().addClass(e.selectedClass):e.table.find("i."+t).parent().addClass(e.selectedClass)},c.prototype.totalPages=function(){return Math.ceil(this.totalIcons()/this.totalIconsPerPage())},c.prototype.totalIcons=function(){return this.options.icons.length},c.prototype.totalIconsPerPage=function(){return 0===this.options.rows?this.options.icons.length:this.options.cols*this.options.rows},c.prototype.updateArrows=function(t){var e=this.options,o=this.totalPages();1===t?e.table.find(".btn-previous").addClass("disabled"):e.table.find(".btn-previous").removeClass("disabled"),t===o||0===o?e.table.find(".btn-next").addClass("disabled"):e.table.find(".btn-next").removeClass("disabled")},c.prototype.updateIcons=function(t){var e=this.options,o=e.table.find("tbody").empty(),s=(t-1)*this.totalIconsPerPage(),n=e.rows;0===e.rows&&(n=e.icons.length);for(var i=0;i<n;i++){for(var a=d("<tr></tr>"),c=0;c<e.cols;c++){var r=s+i*e.cols+c,l=d('<button class="btn '+e.unselectedClass+' btn-icon"></button>').hide();if(r<e.icons.length){var p=e.iconClassFix+e.icons[r];l.val(p).attr("title",p).append('<i class="'+e.iconClass+" "+p+'"></i>').show(),e.icon===p&&l.addClass(e.selectedClass).addClass("btn-icon-selected")}a.append(d("<td></td>").append(l))}o.append(a)}},c.prototype.updateIconsCount=function(){var t=this.options;if(!0===t.footer){var e=["<tr>",'   <td colspan="'+t.cols+'" class="text-center">','       <span class="icons-count"></span>',"   </td>","</tr>"];t.table.find("tfoot").empty().append(e.join(""))}},c.prototype.updateLabels=function(t){var e=this.options,o=this.totalIcons(),s=this.totalPages();e.table.find(".page-count").html(e.labelHeader.replace("{0}",0===s?0:t).replace("{1}",s));var n=(t-1)*this.totalIconsPerPage(),i=t*this.totalIconsPerPage();e.table.find(".icons-count").html(e.labelFooter.replace("{0}",o?n+1:0).replace("{1}",i<o?i:o).replace("{2}",o)),this.updateArrows(t)},c.prototype.updatePagesCount=function(){var t=this.options;if(!0===t.header){for(var e=d("<tr></tr>"),o=0;o<t.cols;o++){var s=d('<td class="text-center"></td>');if(0===o||o===t.cols-1){var n=['<button class="btn btn-arrow '+(0===o?"btn-previous":"btn-next")+" "+t.arrowClass+'" value="'+(0===o?-1:1)+'">','<span class="'+(0===o?t.arrowPrevIconClass:t.arrowNextIconClass)+'"></span>',"</button>"];s.append(n.join("")),e.append(s)}else 0===e.find(".page-count").length&&(s.attr("colspan",t.cols-2).append('<span class="page-count"></span>'),e.append(s))}t.table.find("thead").empty().append(e)}},c.prototype.updatePicker=function(){var t=this.options;if(t.cols<4)throw"Iconpicker => The number of columns must be greater than or equal to 4. [option.cols = "+t.cols+"]";if(t.rows<0)throw"Iconpicker => The number of rows must be greater than or equal to 0. [option.rows = "+t.rows+"]";this.updatePagesCount(),this.updateSearch(),this.updateIconsCount()},c.prototype.updateSearch=function(){var t=this.options,e=["<tr>",'   <td colspan="'+t.cols+'">','       <input type="text" class="form-control search-control" style="width: '+39*t.cols+'px;" placeholder="'+t.searchText+'">',"   </td>","</tr>"];e=d(e.join("")),!0===t.search?e.show():e.hide(),t.table.find("thead").append(e)},c.prototype.setAlign=function(t){this.$element.removeClass(this.options.align).addClass(t),this.options.align=t},c.prototype.setArrowClass=function(t){this.options.arrowClass=this.removeAddClass(".btn-arrow",this.options.arrowClass,t)},c.prototype.setArrowNextIconClass=function(t){this.options.arrowNextIconClass=this.removeAddClass(".btn-next > span",this.options.arrowNextIconClass,t)},c.prototype.setArrowPrevIconClass=function(t){this.options.arrowPrevIconClass=this.removeAddClass(".btn-previous > span",this.options.arrowPrevIconClass,t)},c.prototype.setCols=function(t){this.options.cols=t,this.reset()},c.prototype.setFooter=function(t){var e=this.options.table.find("tfoot");!0===t?e.show():e.hide(),this.options.footer=t},c.prototype.setHeader=function(t){var e=this.options.table.find("thead");!0===t?e.show():e.hide(),this.options.header=t},c.prototype.setIcon=function(t){this.select(t)},c.prototype.setIconset=function(t){var e=this.options;d.isPlainObject(t)?(c.ICONSET._custom=d.extend(c.ICONSET_EMPTY,t),e.iconset="_custom"):c.ICONSET.hasOwnProperty(t)?e.iconset=t:e.iconset=c.DEFAULTS.iconset,e=d.extend(e,c.ICONSET[e.iconset]),this.reset(),this.select(e.icon)},c.prototype.setLabelHeader=function(t){this.options.labelHeader=t,this.updateLabels(this.options.page)},c.prototype.setLabelFooter=function(t){this.options.labelFooter=t,this.updateLabels(this.options.page)},c.prototype.setPlacement=function(t){this.options.placement=t},c.prototype.setRows=function(t){this.options.rows=t,this.reset()},c.prototype.setSearch=function(t){var e=this.options.table.find(".search-control");!0===t?e.show():e.hide(),e.val(""),this.changeList(1),this.options.search=t},c.prototype.setSearchText=function(t){this.options.table.find(".search-control").attr("placeholder",t),this.options.searchText=t},c.prototype.setSelectedClass=function(t){this.options.selectedClass=this.removeAddClass(".btn-icon-selected",this.options.selectedClass,t)},c.prototype.setUnselectedClass=function(t){this.options.unselectedClass=this.removeAddClass(".btn-icon",this.options.unselectedClass,t)};var t=d.fn.iconpicker;d.fn.iconpicker=function(i,a){return this.each(function(){var e=d(this),o=e.data("bs.iconpicker"),t="object"==typeof i&&i;if(o||e.data("bs.iconpicker",o=new c(this,t)),"string"==typeof i){if(void 0===o[i])throw'Iconpicker => The "'+i+'" method does not exists.';o[i](a)}else{var s=o.options;s=d.extend(s,{inline:!1,page:1,selected:-1,table:d('<table class="table-icons"><thead></thead><tbody></tbody><tfoot></tfoot></table>')});var n=void 0!==e.attr("name")?'name="'+e.attr("name")+'"':"";"BUTTON"===e.prop("tagName")?(e.empty().append("<i></i>").append('<input type="hidden" '+n+"></input>").append('<span class="fa fa-caret-down ml-2"></span>').addClass("iconpicker"),o.setIconset(s.iconset),e.on("click",function(t){t.preventDefault(),e.popover({animation:!1,trigger:"manual",html:!0,content:s.table,container:"body",placement:s.placement}).on("inserted.bs.popover",function(){d(e.data("bs.popover").getTipElement()).addClass("iconpicker-popover")}).on("shown.bs.popover",function(){o.switchPage(s.icon),o.bindEvents()}),e.popover("show")})):(s.inline=!0,o.setIconset(s.iconset),e.empty().append('<input type="hidden" '+n+"></input>").append(s.table).addClass("iconpicker").addClass(s.align),o.switchPage(s.icon),o.bindEvents())}})},d.fn.iconpicker.Constructor=c,d.fn.iconpicker.noConflict=function(){return d.fn.iconpicker=t,this},d(document).on("click","body",function(t){d(".iconpicker").each(function(){d(this).is(t.target)||0!==d(this).has(t.target).length||0!==d(".popover").has(t.target).length||d(this).popover("dispose")})}),d('button[role="iconpicker"],div[role="iconpicker"]').iconpicker()}(jQuery);
